[gd_scene load_steps=8 format=3 uid="uid://drl5bf2rd5c4n"]

[ext_resource type="Material" uid="uid://d31aqjn7f8e56" path="res://materials/player.tres" id="1_ngyu0"]
[ext_resource type="Material" uid="uid://ci5l1tnww1je0" path="res://psx/psx_post_mat.tres" id="1_pqrbc"]
[ext_resource type="Environment" uid="uid://f6admlja0bxt" path="res://materials/main_environment.tres" id="2_afvo3"]
[ext_resource type="Material" uid="uid://dvn0poqc72m77" path="res://materials/wall.tres" id="3_trsjp"]

[sub_resource type="BoxShape3D" id="BoxShape3D_gxtkd"]

[sub_resource type="SphereShape3D" id="SphereShape3D_hkngp"]

[sub_resource type="BoxShape3D" id="BoxShape3D_ym5w1"]
size = Vector3(10, 0.1, 10)

[node name="SubViewportContainer" type="SubViewportContainer"]
material = ExtResource("1_pqrbc")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
stretch = true

[node name="SubViewport" type="SubViewport" parent="."]
handle_input_locally = false
size = Vector2i(320, 240)
render_target_update_mode = 4

[node name="Scene" type="Node3D" parent="SubViewport"]

[node name="Player Control" type="Player" parent="SubViewport/Scene"]
speed = 5.0
return_rate = 0.025
spirit = NodePath("Spirit")
camera = NodePath("Spirit/Camera3D")
camera_pivot = NodePath(".")
sub_viewport = NodePath("../../..")
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0347222, -1.44906, -0.766739)
collision_layer = 2

[node name="Player Collider" type="CollisionShape3D" parent="SubViewport/Scene/Player Control"]
shape = SubResource("BoxShape3D_gxtkd")

[node name="CSGPolygon3D" type="CSGPolygon3D" parent="SubViewport/Scene/Player Control/Player Collider"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 0.5, -0.5, 0.5)
polygon = PackedVector2Array(0, 0, 1, 1, 1, 0)
material = ExtResource("1_ngyu0")

[node name="Spirit" type="CharacterBody3D" parent="SubViewport/Scene/Player Control"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.23517e-08, 2.12025, 2.5743)
collision_layer = 4

[node name="Spirit Collider" type="CollisionShape3D" parent="SubViewport/Scene/Player Control/Spirit"]
transform = Transform3D(1, 0, 0, 0, 1, -2.98023e-08, 0, 2.98023e-08, 1, 0, 0, 0)
shape = SubResource("SphereShape3D_hkngp")

[node name="Camera3D" type="Camera3D" parent="SubViewport/Scene/Player Control/Spirit"]
transform = Transform3D(1, 0, 0, 0, 0.866025, 0.5, 0, -0.5, 0.866025, 0, 0, 0)
environment = ExtResource("2_afvo3")

[node name="CSGSphere3D" type="CSGSphere3D" parent="SubViewport/Scene/Player Control/Spirit"]

[node name="Wall" type="CSGBox3D" parent="SubViewport/Scene"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 3, -5)
size = Vector3(10, 0.1, 10)
material = ExtResource("3_trsjp")

[node name="StaticBody3D" type="StaticBody3D" parent="SubViewport/Scene/Wall"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="SubViewport/Scene/Wall/StaticBody3D"]
shape = SubResource("BoxShape3D_ym5w1")

[node name="Wall2" type="CSGBox3D" parent="SubViewport/Scene"]
transform = Transform3D(1, 0, 0, 0, -1, 8.74228e-08, 0, -8.74228e-08, -1, 0, -2, 0)
size = Vector3(10, 0.1, 10)
material = ExtResource("3_trsjp")

[node name="StaticBody3D" type="StaticBody3D" parent="SubViewport/Scene/Wall2"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="SubViewport/Scene/Wall2/StaticBody3D"]
shape = SubResource("BoxShape3D_ym5w1")

[node name="Light Puzzle" type="Node3D" parent="SubViewport/Scene"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -4)
visible = false

[node name="OmniLight3D" type="OmniLight3D" parent="SubViewport/Scene/Light Puzzle"]
omni_range = 2.5

[node name="OmniLight3D2" type="OmniLight3D" parent="SubViewport/Scene/Light Puzzle"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 0, 0)
omni_range = 2.5

[node name="OmniLight3D3" type="OmniLight3D" parent="SubViewport/Scene/Light Puzzle"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 0, 0)
omni_range = 2.5
